{
  "description": "Comprehensive test suite for admin user project invitation functionality (RA-2). Tests cover admin authentication, user invitation workflows, project access management, collaboration features, and various edge cases including invalid inputs, duplicate invitations, and permission validation.",
  "generatedFiles": [
    {
      "fileName": "admin-project-invitation.spec.ts",
      "code": "// Test suite for RA-2: Admin user project invitation functionality\nimport { test, expect } from '@playwright/test';\n\ntest.describe('Admin Project User Invitation - RA-2', () => {\n  let adminPage;\n  const TARGET_URL = 'https://robotesta.app/';\n  \n  // Test data placeholders\n  const testData = {\n    admin: {\n      email: 'admin@example.com',\n      password: 'adminPassword123'\n    },\n    regularUser: {\n      email: 'user@example.com',\n      name: 'John Doe'\n    },\n    project: {\n      name: 'Test Project Alpha',\n      id: 'project-123'\n    }\n  };\n\n  test.beforeEach(async ({ page }) => {\n    adminPage = page;\n    await page.goto(TARGET_URL);\n    \n    // Login as admin user\n    await page.fill('[data-testid=\"email-input\"]', testData.admin.email);\n    await page.fill('[data-testid=\"password-input\"]', testData.admin.password);\n    await page.click('[data-testid=\"login-button\"]');\n    \n    // Wait for admin dashboard to load\n    await expect(page.locator('[data-testid=\"admin-dashboard\"]')).toBeVisible();\n  });\n\n  test.describe('Project Selection and Navigation', () => {\n    test('should navigate to project invitation page', async () => {\n      // Navigate to projects section\n      await adminPage.click('[data-testid=\"projects-menu\"]');\n      await expect(adminPage.locator('[data-testid=\"projects-list\"]')).toBeVisible();\n      \n      // Select specific project\n      await adminPage.click(`[data-testid=\"project-${testData.project.id}\"]`);\n      await expect(adminPage.locator('[data-testid=\"project-details\"]')).toBeVisible();\n      \n      // Access invitation feature\n      await adminPage.click('[data-testid=\"invite-users-button\"]');\n      await expect(adminPage.locator('[data-testid=\"invitation-modal\"]')).toBeVisible();\n      await expect(adminPage.locator('[data-testid=\"invitation-form\"]')).toBeVisible();\n    });\n\n    test('should display project information in invitation context', async () => {\n      await adminPage.click('[data-testid=\"projects-menu\"]');\n      await adminPage.click(`[data-testid=\"project-${testData.project.id}\"]`);\n      await adminPage.click('[data-testid=\"invite-users-button\"]');\n      \n      // Verify project context is shown\n      await expect(adminPage.locator('[data-testid=\"project-name-display\"]')).toContainText(testData.project.name);\n      await expect(adminPage.locator('[data-testid=\"invitation-project-id\"]')).toHaveAttribute('data-project-id', testData.project.id);\n    });\n  });\n\n  test.describe('User Invitation Process', () => {\n    test('should successfully invite a regular user to project', async () => {\n      // Navigate to invitation form\n      await adminPage.click('[data-testid=\"projects-menu\"]');\n      await adminPage.click(`[data-testid=\"project-${testData.project.id}\"]`);\n      await adminPage.click('[data-testid=\"invite-users-button\"]');\n      \n      // Fill invitation form\n      await adminPage.fill('[data-testid=\"invite-email-input\"]', testData.regularUser.email);\n      await adminPage.fill('[data-testid=\"invite-name-input\"]', testData.regularUser.name);\n      \n      // Select user role (regular user)\n      await adminPage.selectOption('[data-testid=\"user-role-select\"]', 'regular');\n      \n      // Submit invitation\n      await adminPage.click('[data-testid=\"send-invitation-button\"]');\n      \n      // Verify success message\n      await expect(adminPage.locator('[data-testid=\"invitation-success-message\"]')).toBeVisible();\n      await expect(adminPage.locator('[data-testid=\"invitation-success-message\"]'))\n        .toContainText('Invitation sent successfully');\n      \n      // Verify user appears in project members list\n      await adminPage.click('[data-testid=\"close-invitation-modal\"]');\n      await expect(adminPage.locator('[data-testid=\"project-members-list\"]')).toBeVisible();\n      await expect(adminPage.locator(`[data-testid=\"member-${testData.regularUser.email}\"]`))\n        .toBeVisible();\n    });\n\n    test('should send invitation with proper project permissions', async () => {\n      await adminPage.click('[data-testid=\"projects-menu\"]');\n      await adminPage.click(`[data-testid=\"project-${testData.project.id}\"]`);\n      await adminPage.click('[data-testid=\"invite-users-button\"]');\n      \n      // Fill form with collaboration permissions\n      await adminPage.fill('[data-testid=\"invite-email-input\"]', testData.regularUser.email);\n      await adminPage.selectOption('[data-testid=\"user-role-select\"]', 'regular');\n      \n      // Set collaboration permissions\n      await adminPage.check('[data-testid=\"permission-view-tasks\"]');\n      await adminPage.check('[data-testid=\"permission-collaborate\"]');\n      await adminPage.check('[data-testid=\"permission-comment\"]');\n      \n      await adminPage.click('[data-testid=\"send-invitation-button\"]');\n      \n      // Verify invitation includes proper permissions\n      await expect(adminPage.locator('[data-testid=\"invitation-success-message\"]')).toBeVisible();\n      \n      // Check member permissions in project\n      const memberRow = adminPage.locator(`[data-testid=\"member-${testData.regularUser.email}\"]`);\n      await expect(memberRow.locator('[data-testid=\"permission-badge-view\"]')).toBeVisible();\n      await expect(memberRow.locator('[data-testid=\"permission-badge-collaborate\"]')).toBeVisible();\n    });\n  });\n\n  test.describe('Invitation Validation and Error Handling', () => {\n    test('should validate email format before sending invitation', async () => {\n      await adminPage.click('[data-testid=\"projects-menu\"]');\n      await adminPage.click(`[data-testid=\"project-${testData.project.id}\"]`);\n      await adminPage.click('[data-testid=\"invite-users-button\"]');\n      \n      // Enter invalid email\n      await adminPage.fill('[data-testid=\"invite-email-input\"]', 'invalid-email');\n      await adminPage.fill('[data-testid=\"invite-name-input\"]', testData.regularUser.name);\n      await adminPage.click('[data-testid=\"send-invitation-button\"]');\n      \n      // Verify validation error\n      await expect(adminPage.locator('[data-testid=\"email-validation-error\"]')).toBeVisible();\n      await expect(adminPage.locator('[data-testid=\"email-validation-error\"]'))\n        .toContainText('Please enter a valid email address');\n      \n      // Verify invitation was not sent\n      await expect(adminPage.locator('[data-testid=\"invitation-success-message\"]')).not.toBeVisible();\n    });\n\n    test('should handle duplicate invitation attempts', async () => {\n      await adminPage.click('[data-testid=\"projects-menu\"]');\n      await adminPage.click(`[data-testid=\"project-${testData.project.id}\"]`);\n      await adminPage.click('[data-testid=\"invite-users-button\"]');\n      \n      // Send first invitation\n      await adminPage.fill('[data-testid=\"invite-email-input\"]', testData.regularUser.email);\n      await adminPage.fill('[data-testid=\"invite-name-input\"]', testData.regularUser.name);\n      await adminPage.click('[data-testid=\"send-invitation-button\"]');\n      await expect(adminPage.locator('[data-testid=\"invitation-success-message\"]')).toBeVisible();\n      \n      // Attempt duplicate invitation\n      await adminPage.click('[data-testid=\"invite-another-user\"]');\n      await adminPage.fill('[data-testid=\"invite-email-input\"]', testData.regularUser.email);\n      await adminPage.click('[data-testid=\"send-invitation-button\"]');\n      \n      // Verify duplicate warning\n      await expect(adminPage.locator('[data-testid=\"duplicate-invitation-warning\"]')).toBeVisible();\n      await expect(adminPage.locator('[data-testid=\"duplicate-invitation-warning\"]'))\n        .toContainText('User is already invited to this project');\n    });\n\n    test('should require admin permissions for invitation feature', async () => {\n      // Simulate non-admin user access attempt\n      await adminPage.evaluate(() => {\n        localStorage.setItem('userRole', 'regular');\n      });\n      await adminPage.reload();\n      \n      await adminPage.click('[data-testid=\"projects-menu\"]');\n      await adminPage.click(`[data-testid=\"project-${testData.project.id}\"]`);\n      \n      // Verify invite button is not visible for non-admin\n      await expect(adminPage.locator('[data-testid=\"invite-users-button\"]')).not.toBeVisible();\n      \n      // Verify access denied message if direct navigation attempted\n      await adminPage.goto(`${TARGET_URL}/projects/${testData.project.id}/invite`);\n      await expect(adminPage.locator('[data-testid=\"access-denied-message\"]')).toBeVisible();\n    });\n  });\n\n  test.describe('Collaboration Features Verification', () => {\n    test('should verify invited user can view project tasks', async () => {\n      // First invite the user\n      await adminPage.click('[data-testid=\"projects-menu\"]');\n      await adminPage.click(`[data-testid=\"project-${testData.project.id}\"]`);\n      await adminPage.click('[data-testid=\"invite-users-button\"]');\n      await adminPage.fill('[data-testid=\"invite-email-input\"]', testData.regularUser.email);\n      await adminPage.check('[data-testid=\"permission-view-tasks\"]');\n      await adminPage.click('[data-testid=\"send-invitation-button\"]');\n      \n      // Navigate to project tasks\n      await adminPage.click('[data-testid=\"close-invitation-modal\"]');\n      await adminPage.click('[data-testid=\"project-tasks-tab\"]');\n      \n      // Verify tasks are visible and member has access\n      await expect(adminPage.locator('[data-testid=\"tasks-list\"]')).toBeVisible();\n      \n      // Check member permissions display\n      const memberRow = adminPage.locator(`[data-testid=\"member-${testData.regularUser.email}\"]`);\n      await expect(memberRow.locator('[data-testid=\"can-view-tasks-indicator\"]')).toBeVisible();\n    });\n\n    test('should enable collaboration features for invited users', async () => {\n      await adminPage.click('[data-testid=\"projects-menu\"]');\n      await adminPage.click(`[data-testid=\"project-${testData.project.id}\"]`);\n      await adminPage.click('[data-testid=\"invite-users-button\"]');\n      \n      // Invite with full collaboration permissions\n      await adminPage.fill('[data-testid=\"invite-email-input\"]', testData.regularUser.email);\n      await adminPage.check('[data-testid=\"permission-view-tasks\"]');\n      await adminPage.check('[data-testid=\"permission-collaborate\"]');\n      await adminPage.check('[data-testid=\"permission-comment\"]');\n      await adminPage.check('[data-testid=\"permission-edit-tasks\"]');\n      \n      await adminPage.click('[data-testid=\"send-invitation-button\"]');\n      \n      // Verify collaboration features are enabled\n      await adminPage.click('[data-testid=\"close-invitation-modal\"]');\n      const memberRow = adminPage.locator(`[data-testid=\"member-${testData.regularUser.email}\"]`);\n      \n      await expect(memberRow.locator('[data-testid=\"collaboration-enabled-badge\"]')).toBeVisible();\n      await expect(memberRow.locator('[data-testid=\"can-edit-tasks-indicator\"]')).toBeVisible();\n      await expect(memberRow.locator('[data-testid=\"can-comment-indicator\"]')).toBeVisible();\n    });\n  });\n\n  test.describe('Invitation Management', () => {\n    test('should display list of pending and accepted invitations', async () => {\n      await adminPage.click('[data-testid=\"projects-menu\"]');\n      await adminPage.click(`[data-testid=\"project-${testData.project.id}\"]`);\n      await adminPage.click('[data-testid=\"manage-invitations-button\"]');\n      \n      // Verify invitations management page\n      await expect(adminPage.locator('[data-testid=\"invitations-management-panel\"]')).toBeVisible();\n      await expect(adminPage.locator('[data-testid=\"pending-invitations-list\"]')).toBeVisible();\n      await expect(adminPage.locator('[data-testid=\"accepted-invitations-list\"]')).toBeVisible();\n    });\n\n    test('should allow admin to revoke pending invitations', async () => {\n      // Send invitation first\n      await adminPage.click('[data-testid=\"projects-menu\"]');\n      await adminPage.click(`[data-testid=\"project-${testData.project.id}\"]`);\n      await adminPage.click('[data-testid=\"invite-users-button\"]');\n      await adminPage.fill('[data-testid=\"invite-email-input\"]', testData.regularUser.email);\n      await adminPage.click('[data-testid=\"send-invitation-button\"]');\n      \n      // Navigate to invitations management\n      await adminPage.click('[data-testid=\"close-invitation-modal\"]');\n      await adminPage.click('[data-testid=\"manage-invitations-button\"]');\n      \n      // Revoke invitation\n      const pendingInvitation = adminPage.locator(`[data-testid=\"pending-invitation-${testData.regularUser.email}\"]`);\n      await expect(pendingInvitation).toBeVisible();\n      await pendingInvitation.locator('[data-testid=\"revoke-invitation-button\"]').click();\n      \n      // Confirm revocation\n      await adminPage.click('[data-testid=\"confirm
